import{_}from"./plugin-vue_export-helper.21dcd24c.js";import{o as c,c as a,a as t,b as o,w as l,d as e,r as i}from"./app.5cb55dd7.js";var d="/assets/Pasted-image-20211203162921.f70a8716.png",r="/assets/Pasted-image-20211203163307.b52dffbd.png",u="/assets/Pasted-image-20211203153729.f757fc38.png",h="/assets/Pasted-image-20211203153801.7c50dad6.png",m="/assets/Pasted-image-20211203153852.4dd149b1.png",p="/assets/Pasted-image-20211203161828.b3128757.png";const f={},k=t("h1",{id:"\u5B9E\u73B0-s-function",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#\u5B9E\u73B0-s-function","aria-hidden":"true"},"#"),e(" \u5B9E\u73B0 S-function")],-1),g={href:"https://www.mathworks.com/help/releases/R2021a/simulink/sfg/writing-level-2-matlab-s-functions.html",target:"_blank",rel:"noopener noreferrer"},b=e("matlab\u6587\u6863-sfuction\u642D\u5EFA\u6B65\u9AA4"),P=t("h2",{id:"notes",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#notes","aria-hidden":"true"},"#"),e(" Notes")],-1),w=t("strong",null,"\u4ECE\u6A21\u677F\u5F00\u59CB",-1),B=t("br",null,null,-1),S=e("\u4F7F\u7528 Level-2 MATLAB S-function template"),v=e("`msfuntmpl_basic"),R=e(" \uFF0C\u5176\u4E2D\u5E26\u6709\u8F83\u591A\u7684\u6CE8\u91CA\u3002"),I=t("p",null,[t("strong",null,"\u6A21\u578B setup"),t("br"),e("\u4E3A\u4E86\u5B9E\u73B0 s-function (level-2) \u7684\u529F\u80FD\uFF0Cmatlab \u5C06\u4E00\u4E2A\u8FD0\u884C\u65F6\u5BF9\u8C61\u4F5C\u4E3A\u53C2\u6570\u4F20\u9001\u5230\u56DE\u8C03\u65B9\u6CD5\u4E2D\u3002\u8FD0\u884C\u65F6\u5BF9\u8C61\u5B9E\u9645\u4E0A\u5145\u5F53\u4E86 matlab \u7684 s-function \u6A21\u5757\u4EE3\u7406\uFF0C\u4F7F\u5176\u80FD\u591F\u5728\u4EFF\u771F\u671F\u95F4\u8BBE\u7F6E\u3001\u8BBF\u95EE\u6A21\u578B\u5C5E\u6027\u3002")],-1),M=e("\u5728 simulink engine \u8C03\u7528 level-2 \u7684 sfunction \u56DE\u8C03\u51FD\u6570\u65F6\uFF0C\u4E00\u4E2A "),D={href:"https://www.mathworks.com/help/releases/R2021a/simulink/slref/simulink.msfcnruntimeblock.html",target:"_blank",rel:"noopener noreferrer"},E=t("code",null,"Simulink.MSFcnRunTimeBlock",-1),T=e(" \u7C7B\u7684\u5B9E\u4F8B\u4F5C\u4E3A\u8FD0\u884C\u65F6\u5BF9\u8C61\u4F20\u9012\u7ED9\u56DE\u8C03\u51FD\u6570\u3002\u6CE8\u610F\uFF0C\u8FD0\u884C\u65F6\u5BF9\u8C61\u4E0D\u652F\u6301 matlab sparse matrices\uFF0C\u56E0\u6B64 "),x=t("code",null,"speye",-1),C=e(" \u7B49\u51FD\u6570\u4E0D\u652F\u6301\u4F7F\u7528\u3002 "),L=t("br",null,null,-1),A={href:"https://www.mathworks.com/help/releases/R2021a/simulink/slref/simulink.msfcnruntimeblock.html",target:"_blank",rel:"noopener noreferrer"},N=t("code",null,"Simulink.MSFcnRunTimeBlock",-1),y=e("\u7684\u4ECB\u7ECD\u7F51\u9875"),F=e(" \u62E5\u6709\u5305\u62EC "),O=t("code",null,"RegBlockMethod",-1),V=e(" \u5728\u5185\u7684\u591A\u79CD\u6210\u5458\u4ECB\u7ECD\u4E0E\u8BED\u6CD5\u8BF4\u660E\uFF0C\u5BF9\u8FD9\u4E9B\u5BF9\u8C61\u7684\u8BBE\u7F6E\uFF08\u5305\u62EC\u5BF9\u4E0D\u540C\u79CD\u7C7B\u8F93\u5165\u3001\u8F93\u51FA\u3001\u72B6\u6001\u53D8\u91CF\u7684\u8BBE\u7F6E\uFF0C\u51FD\u6570\u7684\u8BBE\u7F6E\u7B49\uFF09\u662F setup \u4E2D\u9700\u8981\u5B8C\u6210\u7684\u4EFB\u52A1\u3002 "),q=t("img",{src:d,alt:"Pasted image 20211203162921"},null,-1),H=t("img",{src:r,alt:"Pasted image 20211203163307"},null,-1),j=e(" \u4E24\u4E2A\u4F8B\u5B50\uFF1A"),z=t("ul",null,[t("li",null,[t("code",null,"SetPreCompOutPortInfoToDynamic"),e("\uFF1A\u5C06\u6A21\u5757\u7684\u8F93\u51FA\u7AEF\u53E3\u7684\u7F16\u8BD1\u4FE1\u606F\uFF08\u7EF4\u5EA6\u3001\u6570\u636E\u7C7B\u578B\u3001\u590D/\u5B9E\u6027\u4EE5\u53CA\u91C7\u6837\u6A21\u5F0F\uFF09\u521D\u59CB\u5316\u4E3A\u7EE7\u627F\u3002")]),t("li",null,[t("code",null,"SetPreCompPortInfoToDefaults"),e("\uFF1A\u5C06\u6B64\u6A21\u5757\u7684\u7AEF\u53E3\u7684\u9884\u7F16\u8BD1\u5C5E\u6027\u8BBE\u7F6E\u4E3A\u9ED8\u8BA4\u503C\u3002")]),t("li",null,[t("code",null,"RegBlockMethod"),e(" \uFF1A\u6CE8\u518C\u56DE\u8C03\u51FD\u6570\u3002\u7B2C\u4E00\u4E2A\u53C2\u6570\u662F sfunction API method \u7684\u540D\u5B57\uFF0C\u7B2C\u4E8C\u4E2A\u8F93\u5165\u53C2\u6570\u662F\u5BF9\u5E94\u672C\u5730\u5904\u7406\u8FD9\u4E9B\u51FD\u6570\u7684\u540D\u5B57\uFF0C\u6BD4\u5982 "),t("code",null,"block.RegBlockMethod('PostPropagationSetup',@DoPostPropSetup);")])],-1),G=e("\u4F46\u5728\u4E0A\u8FF0\u9875\u9762\u4E2D\u6CA1\u6709\u5BF9\u5B9E\u9645\u9700\u8981\u8BBE\u7F6E\u7684\u6BCF\u4E00\u79CD\u53C2\u6570\u8FDB\u884C\u8BE6\u7EC6\u8BF4\u660E\uFF0C\u5728\u5176\u7236\u7C7B "),J={href:"https://ww2.mathworks.cn/help/releases/R2021a/simulink/slref/simulink.runtimeblock.html",target:"_blank",rel:"noopener noreferrer"},K=t("code",null,"Simulink.RunTimeBlock",-1),Q=e("\u4ECB\u7ECD\u7F51\u9875"),U=e(" \u4E2D\u6709\u66F4\u591A\u53C2\u6570\u4ECB\u7ECD\uFF0C\u4F8B\u5982 "),W=t("code",null,"Dwork",-1),X=e(" \u4E3A\u79BB\u6563\u5411\u91CF\uFF0C"),Y=t("code",null,"InputPort",-1),Z=e(" \u4E3A\u8F93\u5165\u7AEF\u53E3\u7B49\u3002\u5982\u4E0B\u8868 "),$=t("img",{src:u,alt:"Pasted image 20211203153729"},null,-1),tt=t("img",{src:h,alt:"Pasted image 20211203153801"},null,-1),et=e(" \u51E0\u4E2A\u4F8B\u5B50\uFF1A"),ot=t("li",null,[t("code",null,"NumDialogPrms"),e(" \uFF1A\u521D\u59CB\u5316 sfunction \u7684\u7684 dialog parameter\u3002")],-1),st=t("code",null,"SampleTimes",-1),nt=e("\uFF1A\u6765\u7EE7\u627F"),lt=t("mark",null,"\u91C7\u6837\u65F6\u95F4",-1),it=e("\u3002\u5173\u4E8E\u91C7\u6837\u65F6\u95F4\uFF0C\u53EF\u4EE5\u53C2\u8003 "),_t=e("\u91C7\u6837\u65F6\u95F4\u7C7B\u578B"),ct=e("\u3002"),at=e("\u5BF9\u4E8E\u4E0A\u8FF0\u6BCF\u4E00\u4E2A "),dt=t("code",null,"Simulink.RunTimeBlock",-1),rt=e(" \u6210\u5458\uFF0C\u53EF\u4EE5\u67E5\u770B\u5176\u5177\u4F53\u5B9A\u4E49\uFF0C\u82E5\u6B64\u9875\u9762\u4E2D\u6CA1\u6709\u8BE6\u7EC6\u4ECB\u7ECD\uFF0C\u53EF\u4EE5\u5728\u5176\u7236\u7C7B\u4E2D\u5BFB\u627E\u3002\u4F8B\u5982 "),ut=t("code",null,"InputPort",-1),ht=e("\uFF0C\u5728\u6B64\u9875\u9762\u4E2D\u53EF\u4EE5\u770B\u5230\u5B83\u5C5E\u4E8E "),mt=t("code",null,"Simulink.BlockCompInputPortData",-1),pt=e(" \u6216 "),ft=t("code",null,"Simulink.BlockPreCompInputPortData",-1),kt=e(" \u7C7B\uFF0C\u8FD9\u4E24\u4E2A\u7C7B\u7236\u7C7B\u7684\u7236\u7C7B\u4E3A "),gt={href:"https://ww2.mathworks.cn/help/releases/R2021a/simulink/slref/simulink.blockdata.html#f29-108665",target:"_blank",rel:"noopener noreferrer"},bt=t("code",null,"Simulink.BlockData",-1),Pt=e("\uFF0C\u5728\u9875\u9762\u4E2D\u53EF\u4EE5\u627E\u5230\u66F4\u591A\u5B9A\u4E49\uFF0C\u4F8B\u5982 "),wt=t("code",null,"DatatypeID",-1),Bt=e(" \u7B49 "),St=t("img",{src:m,alt:"Pasted image 20211203153852"},null,-1),vt=t("img",{src:p,alt:"Pasted image 20211203161828"},null,-1),Rt=e("\u9700\u8981\u6CE8\u610F\uFF0C"),It=t("code",null,"InputPort",-1),Mt=e(" \u4E0E "),Dt=t("code",null,"OutputPort",-1),Et=e(" \u7C7B\u6210\u5458\u6CA1\u6709\u627E\u5230 "),Tt=t("code",null,"SampleMode",-1),xt=e("\uFF0C\u4F46\u5B9E\u9645\u4F7F\u7528\u65F6\u5982\u679C"),Ct=t("mark",null,"sfunction \u4F5C\u4E3A\u6E90\u4FE1\u53F7\u8F93\u51FA",-1),Lt=e("\uFF0C\u90A3\u4E48\u9700\u8981\u6307\u5B9A\u5176\u8F93\u51FA\u6A21\u5F0F\uFF0C\u662F\u91C7\u6837\u4FE1\u53F7\u8F93\u51FA\u8FD8\u662F\u5E27\u8F93\u51FA\u3002\u53EF\u4EE5\u53C2\u8003 "),At={href:"https://www.mathworks.com/help/dsp/ug/sample-and-frame-based-concepts.html",target:"_blank",rel:"noopener noreferrer"},Nt=e("Sample- and Frame-Based Concepts - MATLAB & Simulink (mathworks.com)"),yt=e("\u3002 \u5177\u4F53\u4EE3\u7801\u53C2\u8003\u5982\u4E0B\uFF1A "),Ft=t("br",null,null,-1),Ot=t("code",null,"block.OutputPort(1).SamplingMode = 'Sample'; % sample mode",-1),Vt=t("br",null,null,-1),qt=t("code",null,"block.OutputPort(1).SamplingMode = 'Frame'; % frame mode",-1),Ht=e("debug \u53EF\u4EE5\u53C2\u8003 "),jt={href:"https://ww2.mathworks.cn/help/releases/R2021a/slci/ref/simulink-code-inspector-checks.html?searchHighlight=SamplingMode&s_tid=doc_srchtitle#responsive_offcanvas",target:"_blank",rel:"noopener noreferrer"},zt=e("matlab\u5B98\u65B9\u6307\u5BFC"),Gt=e("\u4E00\u4E2A\u4F8B\u5B50 "),Jt=e("adapt_lms"),Kt=e("\uFF0C\u53EF\u4EE5\u5728 matlab \u8F93\u5165\u6307\u4EE4\u67E5\u770B\u5B8C\u6574 simulink \u6A21\u578B\uFF1A "),Qt=t("code",null,"open_system('sldemo_msfcn_lms');",-1);function Ut(Wt,Xt){const s=i("ExternalLinkIcon"),n=i("RouterLink");return c(),a("div",null,[k,t("blockquote",null,[t("p",null,[t("a",g,[b,o(s)])])]),P,t("ul",null,[t("li",null,[t("p",null,[w,B,S,o(n,{to:"/tool/matlab/assets/msfuntmpl.m.html"},{default:l(()=>[v]),_:1}),R])]),t("li",null,[I,t("ul",null,[t("li",null,[t("p",null,[M,t("a",D,[E,o(s)]),T,x,C,L,t("a",A,[N,y,o(s)]),F,O,V,q,H,j]),z]),t("li",null,[t("p",null,[G,t("a",J,[K,Q,o(s)]),U,W,X,Y,Z,$,tt,et]),t("ul",null,[ot,t("li",null,[st,nt,lt,it,o(n,{to:"/tool/matlab/%E9%87%87%E6%A0%B7%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B.html"},{default:l(()=>[_t]),_:1}),ct])]),t("ul",null,[t("li",null,[at,dt,rt,ut,ht,mt,pt,ft,kt,t("a",gt,[bt,o(s)]),Pt,wt,Bt,St,vt,t("ul",null,[t("li",null,[Rt,It,Mt,Dt,Et,Tt,xt,Ct,Lt,t("a",At,[Nt,o(s)]),yt,Ft,Ot,Vt,qt])])])])])])]),t("li",null,[t("p",null,[Ht,t("a",jt,[zt,o(s)])])]),t("li",null,[t("p",null,[Gt,o(n,{to:"/tool/matlab/assets/adapt_lms.m.html"},{default:l(()=>[Jt]),_:1}),Kt,Qt])])])])}var $t=_(f,[["render",Ut],["__file","sfunction\u5B9E\u73B0.html.vue"]]);export{$t as default};
