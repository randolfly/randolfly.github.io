import{_ as t}from"./plugin-vue_export-helper.21dcd24c.js";import{o as p,c as e,b as o,d as c,w as l,a as s,e as n,r as i}from"./app.e36f1ba5.js";const u={},r=s('<h1 id="matlab-\u4EA7\u751F\u9AD8\u7EF4mesh-grid" tabindex="-1"><a class="header-anchor" href="#matlab-\u4EA7\u751F\u9AD8\u7EF4mesh-grid" aria-hidden="true">#</a> matlab \u4EA7\u751F\u9AD8\u7EF4mesh grid</h1><h1 id="matlab-\u4EA7\u751F\u9AD8\u7EF4-mesh-grid" tabindex="-1"><a class="header-anchor" href="#matlab-\u4EA7\u751F\u9AD8\u7EF4-mesh-grid" aria-hidden="true">#</a> Matlab \u4EA7\u751F\u9AD8\u7EF4 Mesh Grid</h1><h2 id="\u5B9A\u4E49" tabindex="-1"><a class="header-anchor" href="#\u5B9A\u4E49" aria-hidden="true">#</a> \u5B9A\u4E49</h2><p>\u6709\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u9700\u8981\u4EA7\u751F mesh \u7F51\u683C\u6765\u505A\u5206\u6790\uFF0C\u6BD4\u5982\u7814\u7A76\u53C2\u6570\u7A7A\u95F4\u4E0A\u67D0\u4E2A\u6307\u6807\u7684\u53D8\u5316\u3002\u8FD9\u65F6\uFF0Cmatlab \u4E2D\u7684 <code>meshgrid</code> \u53EA\u80FD\u4EA7\u751F 2 \u7EF4\u7684\u7F51\u683C\uFF0C\u5E76\u4E0D\u65B9\u4FBF\u4F7F\u7528</p><h2 id="\u65B9\u6848" tabindex="-1"><a class="header-anchor" href="#\u65B9\u6848" aria-hidden="true">#</a> \u65B9\u6848</h2><h3 id="\u4F7F\u7528-ndgrid" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-ndgrid" aria-hidden="true">#</a> \u4F7F\u7528 Ndgrid</h3>',6),k=n("\u80CC\u666F\u53C2\u8003 "),d=n("\u5E76\u8054\u673A\u6784\u6B63\u8FD0\u52A8\u5B66\u6C42\u89E3\u62A5\u544A"),m=n(" \u4E3A\u4E86\u4EA7\u751F Stewart \u5E73\u53F0\u5728\u7A7A\u95F4\u4E2D\u7684 6 \u7EF4\u53C2\u6570\u53D8\u5316 (\u52A8\u5E73\u53F0\u4F4D\u59FF\u53D8\u5316)\uFF0C\u5F97\u5230\u4E86\u4E0B\u9762\u7684\u4EE3\u7801\u3002"),v=s(`<div class="language-matlab ext-matlab line-numbers-mode"><pre class="language-matlab"><code>clear all
  
<span class="token comment">% \u751F\u62101e6\u7EC4\u6570\u636E</span>
  
<span class="token comment">% Stewart\u5E73\u53F0Config\u4FE1\u606F</span>
fix_points <span class="token operator">=</span> <span class="token function">importdata</span><span class="token punctuation">(</span><span class="token string">&#39;data\\config.txt&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p <span class="token operator">=</span> <span class="token function">fix_points</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token operator">:</span><span class="token punctuation">)</span><span class="token operator">&#39;</span><span class="token punctuation">;</span>
b <span class="token operator">=</span> <span class="token function">fix_points</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token operator">:</span><span class="token keyword">end</span><span class="token punctuation">,</span><span class="token operator">:</span><span class="token punctuation">)</span><span class="token operator">&#39;</span><span class="token punctuation">;</span>
  
<span class="token comment">% \u751F\u6210\u6570\u636E\u4FE1\u606F</span>
<span class="token comment">% % \u8BAD\u7EC3\u96C6\u6570\u636E</span>
<span class="token comment">% simu_num = 10;</span>
<span class="token comment">% pos_limit = 100;</span>
<span class="token comment">% angle_limit = 20;</span>
<span class="token comment">% % \u6D4B\u8BD5\u96C6\u6570\u636E</span>
simu_num <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token comment">% % \u5927\u53D8\u5316\u8303\u56F4</span>
<span class="token comment">% pos_limit = 150;</span>
<span class="token comment">% angle_limit = 30;</span>
  
<span class="token comment">% % \u4E2D\u7B49\u53D8\u5316\u8303\u56F4</span>
<span class="token comment">% pos_limit = 100;</span>
<span class="token comment">% angle_limit = 20;</span>
  
<span class="token comment">% \u5C0F\u53D8\u5316\u8303\u56F4</span>
pos_limit <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
angle_limit <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  
<span class="token comment">% \u751F\u6210\u53D8\u91CF\u7F51\u683C</span>
x_range <span class="token operator">=</span> <span class="token function">linspace</span><span class="token punctuation">(</span><span class="token operator">-</span>pos_limit<span class="token punctuation">,</span> pos_limit<span class="token punctuation">,</span> simu_num<span class="token punctuation">)</span><span class="token punctuation">;</span>
y_range <span class="token operator">=</span> <span class="token function">linspace</span><span class="token punctuation">(</span><span class="token operator">-</span>pos_limit<span class="token punctuation">,</span> pos_limit<span class="token punctuation">,</span> simu_num<span class="token punctuation">)</span><span class="token punctuation">;</span>
z_range <span class="token operator">=</span> <span class="token number">500</span> <span class="token operator">+</span> <span class="token function">linspace</span><span class="token punctuation">(</span><span class="token operator">-</span>pos_limit<span class="token punctuation">,</span> pos_limit<span class="token punctuation">,</span> simu_num<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
rx_range <span class="token operator">=</span> <span class="token function">linspace</span><span class="token punctuation">(</span><span class="token operator">-</span>angle_limit<span class="token punctuation">,</span> angle_limit<span class="token punctuation">,</span> simu_num<span class="token punctuation">)</span><span class="token punctuation">;</span>
ry_range <span class="token operator">=</span> <span class="token function">linspace</span><span class="token punctuation">(</span><span class="token operator">-</span>angle_limit<span class="token punctuation">,</span> angle_limit<span class="token punctuation">,</span> simu_num<span class="token punctuation">)</span><span class="token punctuation">;</span>
rz_range <span class="token operator">=</span> <span class="token function">linspace</span><span class="token punctuation">(</span><span class="token operator">-</span>angle_limit<span class="token punctuation">,</span> angle_limit<span class="token punctuation">,</span> simu_num<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
<span class="token punctuation">[</span>X<span class="token punctuation">,</span>Y<span class="token punctuation">,</span>Z<span class="token punctuation">,</span>RX<span class="token punctuation">,</span>RY<span class="token punctuation">,</span>RZ<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">ndgrid</span><span class="token punctuation">(</span>x_range<span class="token punctuation">,</span> y_range<span class="token punctuation">,</span> z_range<span class="token punctuation">,</span> rx_range<span class="token punctuation">,</span> ry_range<span class="token punctuation">,</span> rz_range<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
re_X <span class="token operator">=</span> <span class="token function">reshape</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
re_Y <span class="token operator">=</span> <span class="token function">reshape</span><span class="token punctuation">(</span>Y<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
re_Z <span class="token operator">=</span> <span class="token function">reshape</span><span class="token punctuation">(</span>Z<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
re_RX <span class="token operator">=</span> <span class="token function">reshape</span><span class="token punctuation">(</span>RX<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
re_RY <span class="token operator">=</span> <span class="token function">reshape</span><span class="token punctuation">(</span>RY<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
re_RZ <span class="token operator">=</span> <span class="token function">reshape</span><span class="token punctuation">(</span>RZ<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
grid_data <span class="token operator">=</span> <span class="token function">cat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> re_X<span class="token punctuation">,</span> re_Y<span class="token punctuation">,</span> re_Z<span class="token punctuation">,</span> re_RZ<span class="token punctuation">,</span> re_RY<span class="token punctuation">,</span> re_RX<span class="token punctuation">)</span><span class="token punctuation">;</span>
data_length <span class="token operator">=</span> <span class="token function">length</span><span class="token punctuation">(</span>grid_data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
<span class="token comment">% \u8BA1\u7B97\u9006\u89E3</span>
<span class="token comment">% \u8BA1\u7B97\u4F4D\u79FB</span>
t <span class="token operator">=</span> <span class="token function">grid_data</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">&#39;</span><span class="token punctuation">;</span>
cal_t <span class="token operator">=</span> <span class="token function">reshape</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>data_length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% \u8BA1\u7B97\u89D2\u5EA6</span>
angles <span class="token operator">=</span> <span class="token function">deg2rad</span><span class="token punctuation">(</span><span class="token function">grid_data</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rot <span class="token operator">=</span> <span class="token function">angle2dcm</span><span class="token punctuation">(</span><span class="token function">angles</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">angles</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">angles</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;ZYX&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% \u7EF4\u5EA6\u7EDF\u4E00</span>
cal_p <span class="token operator">=</span> <span class="token function">repmat</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>data_length<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cal_b <span class="token operator">=</span> <span class="token function">repmat</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>data_length<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
<span class="token comment">% dcm\u9700\u8981\u8F6C\u7F6E\u624D\u8868\u793A\u5750\u6807\u8F6C\u6362</span>
leg_vecs <span class="token operator">=</span> <span class="token function">pagemtimes</span><span class="token punctuation">(</span>rot<span class="token punctuation">,</span><span class="token string">&#39;transpose&#39;</span><span class="token punctuation">,</span>cal_p<span class="token punctuation">,</span><span class="token string">&#39;none&#39;</span><span class="token punctuation">)</span><span class="token operator">-</span>cal_b<span class="token operator">+</span>cal_t<span class="token punctuation">;</span>
leg_lengths <span class="token operator">=</span> <span class="token function">squeeze</span><span class="token punctuation">(</span><span class="token function">vecnorm</span><span class="token punctuation">(</span>leg_vecs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&#39;</span><span class="token punctuation">;</span>
  
<span class="token comment">% \u524D6\u5217\u4F4D\u7F6E\u4FE1\u606F, \u540E6\u5217\u8F74\u957F\u4FE1\u606F</span>
data_all <span class="token operator">=</span> <span class="token function">cat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> grid_data<span class="token punctuation">,</span> leg_lengths<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% writematrix(data_all,&#39;./data/simu_data.txt&#39;);</span>
<span class="token comment">% \u8BAD\u7EC3\u96C6\u6570\u636E</span>
<span class="token comment">% save(&#39;./data/simu_data.mat&#39;,&#39;data_all&#39;)</span>
<span class="token comment">% \u9A8C\u8BC1\u96C6\u6570\u636E</span>
<span class="token function">save</span><span class="token punctuation">(</span><span class="token string">&#39;./data/small_validate_data.mat&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;data_all&#39;</span><span class="token punctuation">)</span>
%
<span class="token comment">% % \u9A8C\u8BC1\u7B2C\u4E00\u5217\u8BA1\u7B97</span>
<span class="token comment">% test_t = data_all(1, 1:3)&#39;;</span>
<span class="token comment">% test_rad = deg2rad(data_all(1, 4:6));</span>
<span class="token comment">% test_rot = angle2dcm(test_rad(1), test_rad(2), test_rad(3))&#39;;</span>
<span class="token comment">% test_leg_vec = test_rot*p-b+test_t;</span>
<span class="token comment">% test_leg_vec - leg_vecs(:,:,1)</span>
<span class="token comment">% vecnorm(test_leg_vec,1)-data_all(1,7:end)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\u8FD9\u91CC\u9996\u5148\u751F\u6210\u4E86\u53D8\u91CF\u7684\u8303\u56F4\uFF0C\u7136\u540E\u4F7F\u7528 <code>ndgrid</code> \u76F4\u63A5\u5F97\u5230\u4E86\u7F51\u683C</p><p>\u9700\u8981\u6CE8\u610F\uFF0C\u8FD9\u91CC\u7684\u7F51\u683C\u662F\u591A\u7EF4\u7684\uFF0C\u9700\u8981\u91CD\u65B0 reshape \u4E4B\u540E\u518D cat \u5BFC\u51FA</p><h3 id="note" tabindex="-1"><a class="header-anchor" href="#note" aria-hidden="true">#</a> Note</h3><p>\u4F60\u4F1A\u6CE8\u610F\u5230\uFF0C\u4EE3\u7801\u4E2D\u7531\u4E8E<mark>\u65CB\u8F6C\u77E9\u9635\u662F3\u7EF4\u7684</mark> \uFF0C\u76F8\u5F53\u4E8E nx3x3 \u5F62\u72B6\uFF0C\u9700\u8981\u5BF9\u5176\u505A\u5FEB\u901F\u4E58\u79EF\u7684\u8BDD\uFF0C\u4F7F\u7528\u5230\u4E86 <code>pagetimes</code>\uFF0C\u8FD9\u662F\u9AD8\u7EF4\u77E9\u9635\u76F8\u4E58\u7684\u65B9\u6CD5 <sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup>\uFF0C\u4EE3\u7801\u4E2D\u662F\u7528\u6765\u5FEB\u901F\u8BA1\u7B97\u652F\u94FE\u5411\u91CF\u7684\uFF1A</p><div class="language-matlab ext-matlab line-numbers-mode"><pre class="language-matlab"><code><span class="token comment">% dcm\u9700\u8981\u8F6C\u7F6E\u624D\u8868\u793A\u5750\u6807\u8F6C\u6362</span>

leg_vecs <span class="token operator">=</span> <span class="token function">pagemtimes</span><span class="token punctuation">(</span>rot<span class="token punctuation">,</span><span class="token string">&#39;transpose&#39;</span><span class="token punctuation">,</span>cal_p<span class="token punctuation">,</span><span class="token string">&#39;none&#39;</span><span class="token punctuation">)</span><span class="token operator">-</span>cal_b<span class="token operator">+</span>cal_t<span class="token punctuation">;</span>
leg_lengths <span class="token operator">=</span> <span class="token function">squeeze</span><span class="token punctuation">(</span><span class="token function">vecnorm</span><span class="token punctuation">(</span>leg_vecs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u53C2\u8003" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003" aria-hidden="true">#</a> \u53C2\u8003</h2><h5 id="\u5F15\u6587" tabindex="-1"><a class="header-anchor" href="#\u5F15\u6587" aria-hidden="true">#</a> \u5F15\u6587</h5><h5 id="\u811A\u6CE8" tabindex="-1"><a class="header-anchor" href="#\u811A\u6CE8" aria-hidden="true">#</a> \u811A\u6CE8</h5><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="footnote1" class="footnote-item"><p>\u5176\u5B9E\u662F 3 \u7EF4\u7F62\u4E86\uFF0C\u76F8\u5F53\u4E8E\u4E00\u4E2A\u77E9\u9635\u5E8F\u5217 <a href="#footnote-ref1" class="footnote-backref">\u21A9\uFE0E</a></p></li></ol></section>`,11);function b(_,h){const a=i("RouterLink");return p(),e("div",null,[r,o("p",null,[k,c(a,{to:"/tool/matlab/"},{default:l(()=>[d]),_:1}),m]),v])}var x=t(u,[["render",b],["__file","matlab-\u4EA7\u751F\u9AD8\u7EF4mesh-grid.html.vue"]]);export{x as default};
